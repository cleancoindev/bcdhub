parameter (or :_entries (pair %_Liq_entry_registerDomain string (pair address int)) (or (pair %_Liq_entry_updateInformation string (pair address int)) (pair %_Liq_entry_transferOwnership string address)));
storage (pair :storage (map %bm string (pair :entry (address %owner) (pair (address %resolver) (int %ttl)))) (string %stamp));
code { DUP ;
       DIP { CDR @storage_slash_1 } ;
       CAR @parameter_slash_2 ;
       DUP @parameter ;
       IF_LEFT { RENAME @_domain_resolver_ttl_slash_3 ;
                 { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                 { DIP { DUP } ; SWAP } ;
                 CAR @domain ;
                 { DIP { DUP @storage } ; SWAP } ;
                 CAR %bm ;
                 { DIP { DUP @domain } ; SWAP } ;
                 GET ;
                 IF_NONE { { DIP { DUP @storage } ; SWAP } ;
                           CDR %stamp ;
                           { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                           CAR %bm ;
                           { DIP { { DIP { { DIP { { DIP { DUP } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                           { CDR ; CDR @ttl } ;
                           { DIP { { DIP { { DIP { { DIP { { DIP { DUP } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                           { CDR ; CAR @resolver } ;
                           PAIR %resolver %ttl ;
                           SENDER @owner ;
                           PAIR @entry %owner ;
                           { DIP { { DIP { { DIP { DUP @domain } ; SWAP } } ; SWAP } } ; SWAP } ;
                           DIP { SOME } ;
                           UPDATE ;
                           PAIR @storage %bm %stamp ;
                           NIL operation ;
                           PAIR }
                         { { DIP { DUP @domain } ; SWAP } ;
                           PUSH string "Not an available domain: " ;
                           PAIR ;
                           FAILWITH } ;
                 DIP { DROP ; DROP ; DROP } }
               { IF_LEFT { RENAME @_domain_resolver_ttl_slash_12 ;
                           { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                           { DIP { DUP } ; SWAP } ;
                           CAR @domain ;
                           { DIP { DUP @storage } ; SWAP } ;
                           CAR %bm ;
                           { DIP { DUP @domain } ; SWAP } ;
                           GET ;
                           IF_NONE { DUP @domain ;
                                     PUSH string "Domain does not exist: " ;
                                     PAIR ;
                                     FAILWITH }
                                   { DUP @entry ;
                                     CAR %owner ;
                                     SENDER ;
                                     COMPARE ;
                                     EQ ;
                                     IF { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                                          CDR %stamp ;
                                          { DIP { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } } ; SWAP } ;
                                          CAR %bm ;
                                          { DIP { { DIP { { DIP { { DIP { { DIP { DUP } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                          { CDR ; CDR @ttl } ;
                                          { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                          { CDR ; CAR @resolver } ;
                                          PAIR %resolver %ttl ;
                                          { DIP { { DIP { { DIP { DUP @entry } ; SWAP } } ; SWAP } } ; SWAP } ;
                                          CAR %owner ;
                                          PAIR @newEntry %owner ;
                                          { DIP { { DIP { { DIP { { DIP { DUP @domain } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                          DIP { SOME } ;
                                          UPDATE ;
                                          PAIR @storage %bm %stamp ;
                                          NIL operation ;
                                          PAIR }
                                        { { DIP { DUP @domain } ; SWAP } ;
                                          PUSH string "You do not own the domain: " ;
                                          PAIR ;
                                          FAILWITH } ;
                                     DIP { DROP } } ;
                           DIP { DROP ; DROP ; DROP } }
                         { RENAME @_domain_newOwner_slash_20 ;
                           { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                           { DIP { DUP } ; SWAP } ;
                           CAR @domain ;
                           { DIP { DUP @storage } ; SWAP } ;
                           CAR %bm ;
                           { DIP { DUP @domain } ; SWAP } ;
                           GET ;
                           IF_NONE { DUP @domain ;
                                     PUSH string "Not a registered domain: " ;
                                     PAIR ;
                                     FAILWITH }
                                   { DUP @entry ;
                                     CAR %owner ;
                                     SENDER ;
                                     COMPARE ;
                                     EQ ;
                                     IF { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } ;
                                          CDR %stamp ;
                                          { DIP { { DIP { { DIP { DUP @storage } ; SWAP } } ; SWAP } } ; SWAP } ;
                                          CAR %bm ;
                                          { DIP { { DIP { DUP @entry } ; SWAP } } ; SWAP } ;
                                          CDR ;
                                          { DIP { { DIP { { DIP { { DIP { { DIP { { DIP { DUP } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                          CDR @newOwner ;
                                          PAIR @newEntry %owner ;
                                          { DIP { { DIP { { DIP { { DIP { DUP @domain } ; SWAP } } ; SWAP } } ; SWAP } } ; SWAP } ;
                                          DIP { SOME } ;
                                          UPDATE ;
                                          PAIR @storage %bm %stamp ;
                                          NIL operation ;
                                          PAIR }
                                        { { DIP { DUP @domain } ; SWAP } ;
                                          PUSH string "You do not own the domain: " ;
                                          PAIR ;
                                          FAILWITH } ;
                                     DIP { DROP } } ;
                           DIP { DROP ; DROP ; DROP } } } ;
       DIP { DROP ; DROP } }